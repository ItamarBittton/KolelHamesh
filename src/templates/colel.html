<div class="row">
    <div class="col-lg-4">
        <rd-widget ng-if="display">
            <form name="colelForm" novalidate>
                <rd-widget-header icon="icon-note" title="פרטי הכולל">
                    <button ng-click="save(colelForm.$valid)" ng-class="{'disabled': colelForm.$invalid}" class="btn btn-sm btn-info">שמור</button>
                    <button ng-click="close()" class="btn btn-sm btn-warning">בטל</button>
                    <button ng-click="delete()" class="btn btn-sm btn-danger">מחק</button>
                </rd-widget-header>
                <rd-widget-body classes="xxlarge no-padding">
                    <div class="form-group form-md-line-input" ng-class="{ 'has-error': (formErrors || colelForm.name.$dirty) && colelForm.name.$invalid }">
                        <label class="col-md-4 control-label">שם הכולל</label>
                        <div class="col-md-8">
                            <input name="name" type="text" ng-model="colel.name" class="form-control" ng-minlength="3" required>
                        </div>
                    </div>
                    <div class="form-group form-md-line-input" ng-class="{ 'has-error': (formErrors || colelForm.address.$dirty) && colelForm.address.$invalid }">
                        <label class="col-md-4 control-label">כתובת</label>
                        <div class="col-md-8">
                            <input name="address" type="text" ng-model="colel.address" class="form-control" required>
                        </div>
                    </div>
                    <div class="form-group form-md-line-input" ng-class="{ 'has-error': (formErrors || colelForm.hours.$dirty) && colelForm.hours.$invalid }">
                        <label class="col-md-4 control-label">שם האחראי</label>
                        <div class="col-md-8">
                            <input name="hours" type="text" ng-model="colel.manager_name" class="form-control" required>
                        </div>
                    </div>
                    <div class="form-group form-md-line-input" ng-class="{ 'has-error': (formErrors || colelForm.phone.$dirty) && colelForm.phone.$invalid }">
                        <label class="col-md-4 control-label">טלפון</label>
                        <div class="col-md-8">
                            <input name="phone" type="text" ng-model="colel.phone" class="form-control" required>
                        </div>
                    </div>
                    <div class="form-group form-md-line-input" ng-class="{ 'has-error': (formErrors || colelForm.mailAddress.$dirty) && colelForm.mailAddress.$invalid }">
                        <label class="col-md-4 control-label">כתובת דואר</label>
                        <div class="col-md-8">
                            <input name="mailAddress" type="text" ng-model="colel.mail_address" class="form-control" required>
                        </div>
                    </div>
                    <div class="form-group form-md-line-input" ng-class="{ 'has-error': (formErrors || colelForm.password.$dirty) && colelForm.password.$invalid }">
                        <label class="col-md-4 control-label">סיסמא</label>
                        <div class="col-md-8">
                            <input name="password" type="input" ng-model="colel.password" class="form-control" required>
                        </div>
                    </div>
                    <div class="form-group form-md-line-input">
                        <label class="col-md-4 control-label">צבע ההודעה</label>
                        <div class="col-md-8">
                            <select ng-model="colel.note.type" name="noteType" class="form-control">
                                <option value="success">הצלחה (ירוק)</option>
                                <option value="warning">אזהרה (צהוב)</option>
                                <option value="danger">שגיאה (אדום)</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group form-md-line-input">
                        <label class="col-md-4 control-label">הודעה</label>
                        <div class="col-md-8">
                            <input name="noteMsg" type="text" ng-model="colel.note.msg" class="form-control">
                        </div>
                    </div>
                    <div class="form-group form-md-line-input">
                        <!--<div class="material-switch col-md-4">
                            <input id="is_only_daily" ng-true-value="'colel.is_only_daily'" ng-model="colel.is_only_daily" type="checkbox" />
                            <label for="is_only_daily" class="label-danger"></label>
                        </div>
                        <label class="col-md-8 control-label" style="margin-bottom: 20px">הגבל גישה ללוח שנה</label>-->
                        <div class="col-md-12">
                            <md-switch class="md-warn" ng-model="colel.is_only_daily" aria-label="הגבל גישה ללוח שנה">
                                הגבל גישה ללוח שנה
                            </md-switch>
                        </div>
                    </div>
                    <div class="form-group form-md-line-input">
                        <!--<div class="material-switch col-md-4">
                            <input id="is_prev_month" ng-true-value="'colel.is_prev_month'" ng-model="colel.is_prev_month" type="checkbox" />
                            <label for="is_prev_month" class="label-success"></label>
                        </div>-->
                        <div class="col-md-12">
                            <md-switch ng-model="colel.is_prev_month" class="md-primary" md-no-ink aria-label="אפשר עדכון לחודש הקודם">
                                אפשר עדכון לחודש הקודם
                            </md-switch>
                        </div>
                    </div>
                    <div class="form-group form-md-line-input">
                        <!--<div class="material-switch col-md-4">
                            <input id="is_one_time_allow" ng-true-value="'colel.is_one_time_allow'" ng-model="colel.is_one_time_allow" type="checkbox"
                            />
                            <label for="is_one_time_allow" class="label-danger"></label>

                        </div>
                        <label class="col-md-8 control-label" style="margin-bottom: 20px">הגבל עדכון מרובה</label>-->
                        <div class="col-md-12 md-red">
                            <md-switch class="md-primary" ng-model="colel.is_one_time_allow" md-no-ink aria-label="אפשר עדכון מרובה">
                                אפשר עדכון מרובה
                            </md-switch>
                        </div>
                    </div>
                    <div class="form-group form-md-line-input">
                        <div class="col-md-12">
                            <md-switch ng-model="colel.is_report_allow" class="md-primary" md-no-ink aria-label="אפשר הנפקת דוח">
                                אפשר הנפקת דוח
                            </md-switch>
                        </div>
                    </div>
                    <div class="form-group form-md-line-input" ng-class="{ 'has-error': (formErrors || colelForm.hours.$dirty) && colelForm.hours.$invalid }">
                        <label class="col-md-4 control-label">שעות פעילות:</label>
                        <span class="clearfix"></span>
                        <p ng-repeat="(key, value) in colel.schedule track by $index" class="container-fluid">
                            <label class="col-lg-4 control-label">{{ $root.t[key] || key }}:</label>
                            <input class="col-lg-4 form-control" type="text" ng-model="colel.schedule[key].start">
                            <input class="col-lg-4 form-control" type="text" ng-model="colel.schedule[key].end" class="col-lg-4 form-control">

                        </p>
                        </details>
                    </div>
                </rd-widget-body>
            </form>
        </rd-widget>
    </div>

    <div ng-class="{'col-lg-12':!display, 'col-md-8':display}">
        <rd-widget>
            <rd-widget-header icon="icon-people">
                <a ng-if="away" href="/" class="btn btn-danger btn-sm">חזור למנהל</a>
                <div class="btn-group colel-header" uib-dropdown>
                    <button type="button" ng-click="add()" class="btn btn-sm btn-info">הוסף כולל</button>
                    <button type="button" class="btn btn-default btn-sm" uib-dropdown-toggle>
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" uib-dropdown-menu role="menu" style="left:0;right:auto;">
                        <li style="margin: 0 20px -10px;color:#000;">עדכון כל הכוללים</li>
                        <li class="divider"></li>
                        <li role="menuitem">
                            <a href ng-click="updateAll('is_only_daily', !total.daily)">
                                <span ng-if="!total.daily">הגבל </span>גישה ללוח שנה
                            </a>
                        </li>
                        <li role="menuitem">
                            <a href ng-click="updateAll('is_prev_month', !total.prevMonth)">
                                <span ng-if="total.prevMonth">הגבל </span>עדכון לחודש הקודם
                            </a>
                        </li>
                    </ul>

                    <div class="btn-group" auto-close="outsideClick" uib-dropdown dropdown-append-to-body>
                        <button id="btn-append-to-body" type="button" class="btn btn-primary" uib-dropdown-toggle>
                            עדכן את כולם כשבת\חג בתאריך
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="btn-append-to-body">
                            <li role="menuitem">
                                <input class="form-control" type="text" ng-model="chosenDate" id="datepicker">
                            </li>
                            <li role="menuitem">
                                <button ng-disabled="!chosenDate" ng-click="updateAllStudents(chosenDate)" class="btn btn-sm btn-info">שמור</button>
                            </li>
                        </ul>
                    </div>

                    <!-- <div class="btn-group dropdown" uib-dropdown="" dropdown-append-to-body="">
                        <button id="btn-append-to-body" type="button" class="btn btn-primary dropdown-toggle" uib-dropdown-toggle="" aria-haspopup="true"
                            aria-expanded="false">
                            <span class="caret"></span>
                        </button>

                        <ul class="dropdown-menu" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-body">


                        </ul>
                    </div> -->

                    <!-- <div class="dateForAll" uib-dropdown>
                        <span uib-dropdown-toggle>

                            עדכן את כולם כשבת\חג בתאריך:
                        </span>

                        <ul class="dropdown-menu" uib-dropdown-menu role="menu">
                            <li role="menuitem">
                                <input class="form-control" type="text" ng-model="chosenDate" id="datepicker">
                            </li>
                            <li role="menuitem">
                                <button ng-click="updateAllStudents(chosenDate)" class="btn btn-sm btn-info">שמור</button>
                            </li>
                        </ul>
                    </div> -->
                </div>
            </rd-widget-header>
            <rd-widget-body classes="xxlarge no-padding">
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <td>שם הכולל</td>
                            <td width="180px">כתובת</td>
                            <td width="180px">שעות פעילות</td>
                            <td>שם האחראי</td>
                            <td>טלפון</td>
                            <td>כתובת דואר</td>
                            <td>כניסה אחרונה</td>
                        </thead>
                        <tbody>
                            <tr ng-repeat="colel in colels track by $index">
                                <td>
                                    <a style="cursor:pointer" ng-click="goTo(colel)">{{ colel.name }}</a>
                                </td>
                                <td ng-click="edit($index)">{{ colel.address }}</td>
                                <td>
                                    <details>
                                        <summary>לחץ כדי להציג/להסתיר</summary>
                                        <span class="clearfix"></span>
                                        <p ng-repeat="(key, value) in colel.schedule track by $index">
                                            <label class="control-label">
                                                {{ $root.t[key] || key }}:
                                            </label>
                                            <span style="float: left; line-height: 37px;"> {{ colel.schedule[key].end }} - {{ colel.schedule[key].start }}</span>
                                        </p>
                                    </details>
                                </td>
                                <td ng-click="edit($index)">{{ colel.manager_name }}</td>
                                <td ng-click="edit($index)">{{ colel.phone }}</td>
                                <td ng-click="edit($index)">{{ colel.mail_address }}</td>
                                <td ng-style="{'background-color': timeLapse(colel.last_login)}">{{colel.last_login | date:"dd/MM/yyyy"}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </rd-widget-body>
        </rd-widget>
    </div>
</div>